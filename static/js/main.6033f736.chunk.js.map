{"version":3,"sources":["components/Modal/Modal.module.css","components/Searchbar/Searchbar.js","services/pixabay.js","components/Modal/Modal.js","components/ImageGalleryItem/ImageGalleryItem.js","components/Button/Button.js","components/ImageGallery/ImageGallery.js","App.js","index.js"],"names":["module","exports","Searchbar","state","searchValue","handleSearchSubmit","e","preventDefault","trim","props","onSubmit","setState","toast","warn","handleSearchChange","target","value","toLowerCase","className","this","type","name","autocomplete","autofocus","placeholder","onChange","Component","PixabayFetch","_searchQuery","_page","perPage","fetch","page","axios","get","then","result","data","hits","catch","err","console","log","modalRoot","document","querySelector","Modal","handleKeyDown","code","toggleModal","handleBackdropClick","currentTarget","window","addEventListener","removeEventListener","createPortal","s","overlay","onClick","modal","src","modalImg","alt","tags","ImageGalleryItem","id","webformatURL","largeImageURL","showModal","Button","newPixabayFetch","ImageGallery","searchResult","error","loader","onLoadMore","searchPhotos","prevState","ScrollImages","scrollTo","top","documentElement","scrollHeight","behavior","onClickModalImg","img","dataset","prevProps","resetPage","searchQuery","length","map","App","getFormSubmitValue","position","autoClose","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.6033f736.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__2GjdW\",\"modal\":\"Modal_modal__P3_V5\"};","import { Component } from \"react\";\nimport { toast } from \"react-toastify\";\n\nexport class Searchbar extends Component {\n  state = {\n    searchValue: \"\",\n  };\n\n  handleSearchSubmit = (e) => {\n    e.preventDefault();\n    if (this.state.searchValue.trim() === \"\") {\n      toast.warn(\"Enter correct name!\");\n      return;\n    }\n    this.props.onSubmit(this.state.searchValue);\n    this.setState({ searchValue: \"\" });\n  };\n\n  handleSearchChange = (e) => {\n    this.setState({ searchValue: e.target.value.toLowerCase() });\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSearchSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            name=\"value\"\n            value={this.state.searchValue}\n            autocomplete=\"off\"\n            autofocus\n            placeholder=\"Search images and photos\"\n            onChange={this.handleSearchChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n","import axios from \"axios\";\n\nexport class PixabayFetch {\n  constructor() {\n    this._searchQuery = \"\";\n    this._page = 1;\n    this.perPage = 12;\n  }\n\n  get searchQuery() {\n    return this._searchQuery;\n  }\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page += value);\n  }\n\n  resetPage() {\n    return (this._page = 1);\n  }\n\n  searchPhotos() {\n    const url = \"https://pixabay.com/api/\";\n    const apiKey = \"23141272-55f7853bfecadbbcd9800c5ad\";\n    const params = `?key=${apiKey}&q=${this._searchQuery}&page=${this.page}&image_type=photo&orientation=horizontal&per_page=${this.perPage}`;\n    const fetch = url + params;\n    return axios\n      .get(fetch)\n      .then((result) => {\n        // console.log(result);\n        return result.data;\n      })\n      .then((data) => {\n        // console.log(data.hits);\n        return data.hits;\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n  }\n}\n","import { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport s from \"../Modal/Modal.module.css\";\n\nconst modalRoot = document.querySelector(\"#modal-root\");\n\nexport default class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleKeyDown);\n  }\n\n  handleKeyDown = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.toggleModal();\n    }\n  };\n\n  handleBackdropClick = (e) => {\n    if (e.currentTarget === e.target) {\n      this.props.toggleModal();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className={s.overlay} onClick={this.handleBackdropClick}>\n        <div className={s.modal}>\n          <img src={this.props.modalImg} alt={this.props.tags} />\n        </div>\n      </div>,\n      modalRoot\n    );\n  }\n}\n","import Modal from \"../Modal/Modal\";\n\nexport function ImageGalleryItem({\n  id,\n  webformatURL,\n  tags,\n  largeImageURL,\n  modalImg,\n  onClick,\n  showModal,\n  toggleModal,\n}) {\n  return (\n    <>\n      <li className=\"ImageGalleryItem\" key={id}>\n        <img\n          src={webformatURL}\n          alt={tags}\n          data-img={largeImageURL}\n          className=\"ImageGalleryItem-image\"\n          onClick={onClick}\n        />\n      </li>\n      {showModal && (\n        <Modal modalImg={modalImg} alt={tags} toggleModal={toggleModal} />\n      )}\n    </>\n  );\n}\n","export function Button({ onClick }) {\n  return (\n    <button type=\"button\" onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n","import { Component } from \"react\";\nimport { PixabayFetch } from \"../../services/pixabay\";\nimport { ImageGalleryItem } from \"../ImageGalleryItem/ImageGalleryItem\";\nimport { Button } from \"../Button/Button\";\n// import \"../../../node_modules/react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\n// import { Loader } from \"../Loader/Loader\";\n\nconst newPixabayFetch = new PixabayFetch();\n\nexport class ImageGallery extends Component {\n  state = {\n    searchResult: [],\n    error: null,\n    // status: \"idle\",\n    showModal: false,\n    loader: false,\n    modalImg: \"\",\n  };\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.value !== this.props.value) {\n      newPixabayFetch.resetPage();\n      this.setState({ loader: true });\n      newPixabayFetch.searchQuery = this.props.value;\n      newPixabayFetch.searchPhotos()\n        .then((searchResult) => {\n          this.setState({ searchResult, loader: false });\n        })\n        .catch((error) => this.setState({ error }));\n    }\n  }\n\n  onLoadMore = () => {\n    newPixabayFetch.page = 1;\n    this.setState({ loader: true });\n    newPixabayFetch\n      .searchPhotos()\n      .then((searchResult) => {\n        this.setState((prevState) => ({\n          searchResult: [...prevState.searchResult, ...searchResult],\n          loader: false,\n        }));\n      })\n      .then(this.ScrollImages)\n      .catch((error) => this.setState({ error }));\n  };\n\n  ScrollImages = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  toggleModal = () => {\n    this.setState(({ showModal }) => ({\n      showModal: !showModal,\n    }));\n  };\n\n  onClickModalImg = (e) => {\n    const { img } = e.target.dataset;\n    this.setState({ modalImg: img });\n    this.toggleModal();\n  };\n\n  render() {\n    return (\n      <>\n        {/* {this.state.loader && <Loader /> } */}\n        {this.state.loader && <div>Loading...</div>}\n        <ul className=\"ImageGallery\">\n          {this.state.searchResult.length > 0 &&\n            this.state.searchResult.map(\n              ({ id, webformatURL, tags, largeImageURL }) => (\n                <ImageGalleryItem\n                  onClick={this.onClickModalImg}\n                  key={id}\n                  id={id}\n                  webformatURL={webformatURL}\n                  tags={tags}\n                  largeImageURL={largeImageURL}\n                  modalImg={this.state.modalImg}\n                  showModal={this.state.showModal}\n                  toggleModal={this.toggleModal}\n                />\n              )\n            )}\n        </ul>\n        {this.state.searchResult.length >= 12 && (\n          <Button onClick={this.onLoadMore} />\n        )}\n      </>\n    );\n  }\n}\n\n//   if (this.state.status === 'idle') {\n//     return <h1>Enter name to find</h1>;\n//   }\n\n//   if (this.state.status === 'pending') {\n//     return <Loader />;\n//   }\n\n//   if (this.state.status === 'rejected') {\n//     return <h1>Error</h1>;\n//   }\n\n//   if (this.state.status === 'resolved') {\n//     return (\n//       <>\n//         <ul className=\"ImageGallery\">\n//           {this.state.searchResult.length > 0 &&\n//             this.state.searchResult.map(\n//               ({ id, webformatURL, tags, largeImageURL }) => (\n//                 <ImageGalleryItem\n//                   onClick={this.onClickModalImg}\n//                   key={id}\n//                   id={id}\n//                   webformatURL={webformatURL}\n//                   tags={tags}\n//                   largeImageURL={largeImageURL}\n//                   modalImg={this.state.modalImg}\n//                   showModal={this.state.showModal}\n//                   toggleModal={this.toggleModal}\n//                 />\n//               )\n//             )}\n//         </ul>\n//         {this.state.searchResult.length >= 12 && (\n//           <Button onClick={this.onLoadMore} />\n//         )}\n//       </>\n//     );\n//   }\n","import { Component } from \"react\";\nimport \"./App.css\";\nimport { Searchbar } from \"./components/Searchbar/Searchbar\";\nimport { ImageGallery } from \"./components/ImageGallery/ImageGallery\";\nimport { ToastContainer } from \"react-toastify\";\nimport \"../node_modules/react-toastify/dist/ReactToastify.css\";\n\nclass App extends Component {\n  state = {\n    value: \"\",\n  };\n\n  getFormSubmitValue = (value) => {\n    this.setState({ value });\n  };\n\n  render() {\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.getFormSubmitValue} />\n        <ImageGallery value={this.state.value} />\n        <ToastContainer position=\"top-left\" autoClose={2000} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}